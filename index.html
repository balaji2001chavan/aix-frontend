<!DOCTYPE html>
<html lang="mr">
<head>
  <meta charset="UTF-8" />
  <title>AIX ‚Äì Global Control Center</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: radial-gradient(circle at top, #0f172a, #020617);
      color: #e5e7eb;
      height: 100vh;
      display: flex;
    }
    .panel {
      padding: 14px;
      box-sizing: border-box;
    }
    .left {
      width: 20%;
      background: #020617;
      border-right: 1px solid #1e293b;
    }
    .center {
      width: 60%;
      display: flex;
      flex-direction: column;
    }
    .right {
      width: 20%;
      background: #020617;
      border-left: 1px solid #1e293b;
      overflow-y: auto;
    }
    h2 {
      margin: 0 0 10px;
      font-size: 16px;
      color: #38bdf8;
    }
    .status {
      font-size: 13px;
      margin-bottom: 6px;
    }
    .chat {
      flex: 1;
      overflow-y: auto;
      padding: 10px;
    }
    .msg {
      margin-bottom: 10px;
      line-height: 1.4;
    }
    .user { color: #a5f3fc; }
    .aix { color: #e5e7eb; }
    .input-box {
      display: flex;
      border-top: 1px solid #1e293b;
    }
    input {
      flex: 1;
      padding: 12px;
      background: #020617;
      color: #fff;
      border: none;
      outline: none;
      font-size: 14px;
    }
    button {
      background: #38bdf8;
      color: #020617;
      border: none;
      padding: 0 18px;
      cursor: pointer;
      font-weight: bold;
    }
    .proof {
      font-size: 12px;
      background: #020617;
      padding: 6px;
      border: 1px solid #1e293b;
      margin-bottom: 6px;
      word-break: break-all;
    }
    .green { color: #22c55e; }
    .red { color: #ef4444; }
  </style>
</head>
<body>

<!-- LEFT: STATUS -->
<div class="panel left">
  <h2>Status</h2>
  <div id="statusBox">
    <div class="status">Loading...</div>
  </div>
  <button onclick="sendQuick('status')">Refresh</button>
</div>

<!-- CENTER: CHAT -->
<div class="panel center">
  <div class="chat" id="chat"></div>
  <div class="input-box">
    <input id="input" placeholder="‡§á‡§•‡•á ‡§≤‡§ø‡§π‡§æ‚Ä¶ (Marathi / Hindi / English)" />
    <button onclick="send()">Send</button>
  </div>
</div>

<!-- RIGHT: PROOF -->
<div class="panel right">
  <h2>Proof / Output</h2>
  <div id="proofBox"></div>
</div>

<script>
const API = "https://boss-aix-backend-nai6.onrender.com/api/aix";

const chat = document.getElementById("chat");
const input = document.getElementById("input");
const statusBox = document.getElementById("statusBox");
const proofBox = document.getElementById("proofBox");

function addMsg(text, cls) {
  const div = document.createElement("div");
  div.className = "msg " + cls;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

async function sendQuick(text) {
  addMsg(text, "user");
  await callAIX(text);
}

async function send() {
  const text = input.value.trim();
  if (!text) return;
  input.value = "";
  addMsg(text, "user");
  await callAIX(text);
}

async function callAIX(message) {
  try {
    const res = await fetch(API, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message })
    });
    const data = await res.json();

    if (data.reply) {
      addMsg(data.reply, "aix");

      if (data.reply.includes("/backend/output")) {
        const p = document.createElement("div");
        p.className = "proof";
        p.textContent = data.reply;
        proofBox.prepend(p);
      }

      if (message === "status" || message === "health") {
        statusBox.innerHTML = `<div class="status green">${data.reply}</div>`;
      }
    }
  } catch (e) {
    addMsg("‚ùå Backend error", "aix");
    statusBox.innerHTML = `<div class="status red">Backend down</div>`;
  }
}

// Auto hello
addMsg("üëã ‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞ ‡§¨‡•â‡§∏. ‡§Æ‡•Ä AIX ‡§Ü‡§π‡•á. ‡§ï‡§æ‡§Ø ‡§ï‡§∞‡•Ç?", "aix");
</script>

</body>
</html>
