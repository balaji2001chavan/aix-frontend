<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>BOSS AIX ‚Äì LIVE</title>
</head>
<body style="font-family:Arial">

<h2>BOSS AIX ‚Äì Talk to AIX</h2>

<textarea id="msg" rows="8" cols="60">
AIX:
GOAL: Take screenshot of website
CONTEXT: Demo proof
RULES: No login
OUTPUT: Screenshot
</textarea>

<br><br>
<button onclick="askAIX()">Ask AIX</button>

<div id="output" style="margin-top:20px;"></div>

<script>
const BACKEND_URL = "https://boss-aix-backend-nai6.onrender.com";
async function askAIX() {
  const msg = document.getElementById("msg").value;
  const out = document.getElementById("output");

  out.innerHTML = "AIX ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§ ‡§Ü‡§π‡•á...";

  try {
    const res = await fetch(BACKEND_URL + "/api/aix", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: msg })
    });

    const data = await res.json();

    let html = `<pre>${JSON.stringify(data, null, 2)}</pre>`;

    if (data.imageUrl) {
      html += `
        <h3>üì∏ Screenshot Proof</h3>
        <img src="${BACKEND_URL}${data.imageUrl}"
             style="max-width:100%; border:2px solid black;" />
      `;
    }

    out.innerHTML = html;

  } catch (e) {
    out.innerHTML = "‚ùå Error: " + e.message;
  }
}
</script>
<button onclick="startVoice()">üéôÔ∏è Voice Command</button>

<script>
function startVoice() {
  const SpeechRecognition =
    window.SpeechRecognition || window.webkitSpeechRecognition;

  if (!SpeechRecognition) {
    alert("Voice recognition not supported in this browser");
    return;
  }

  const recognition = new SpeechRecognition();
  recognition.lang = "mr-IN"; // Marathi (change to hi-IN / en-IN)
  recognition.interimResults = false;
  recognition.maxAlternatives = 1;

  recognition.start();

  recognition.onresult = function (event) {
    const spokenText = event.results[0][0].transcript;
    document.getElementById("msg").value = spokenText;
    alert("You said: " + spokenText);
  };

  recognition.onerror = function (event) {
    alert("Voice error: " + event.error);
  };
}
</script>
</body>
</html>
