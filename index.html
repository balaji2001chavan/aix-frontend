<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AIX ‚Ä¢ Super Intelligence Console</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#060914;
  --panel:#0f1530;
  --card:#151c3d;
  --accent:#00f5a0;
  --accent2:#4da3ff;
  --text:#e9ecf5;
  --muted:#9aa3b2;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter;
  background:radial-gradient(circle at top,#0b1233,#060914);
  color:var(--text);
}
.app{
  display:grid;
  grid-template-rows:56px 1fr 160px;
  height:100vh;
}
.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0 16px;
  background:rgba(15,21,48,.95);
  border-bottom:1px solid #1a235a;
}
.badge{font-size:12px;color:var(--accent)}
.main{
  display:grid;
  grid-template-columns:1fr 360px;
}
.preview{
  position:relative;
  background:#000;
}
.preview video,.preview img,.preview audio{
  width:100%;
  height:100%;
  object-fit:contain;
}
.placeholder{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--muted);
}
.side{
  background:var(--panel);
  border-left:1px solid #1a235a;
  display:flex;
  flex-direction:column;
}
.section{padding:12px;border-bottom:1px solid #1a235a}
.section h4{margin:0 0 8px;font-size:13px;color:var(--muted)}
.tools{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:8px;
}
.tool{
  background:var(--card);
  padding:10px;
  border-radius:12px;
  text-align:center;
  font-size:12px;
  cursor:pointer;
}
.files{
  font-size:12px;
  overflow:auto;
  padding:10px;
}
.files div{padding:6px 0;cursor:pointer}
.logs{
  flex:1;
  overflow:auto;
  font-size:12px;
  padding:12px;
}
.bottom{
  background:linear-gradient(180deg,var(--panel),#060914);
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:8px;
}
.chat{
  display:flex;
  gap:8px;
}
textarea{
  flex:1;
  resize:none;
  border-radius:12px;
  padding:10px;
  font-family:Inter;
  border:none;
}
button{
  border:none;
  border-radius:12px;
  padding:12px 16px;
  font-weight:800;
  cursor:pointer;
}
.send{
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#000;
}
.actionbar{
  display:flex;
  gap:10px;
}
.actionbar button{
  flex:1;
  background:#1b2355;
  color:#fff;
}
@media(max-width:900px){
  .main{grid-template-columns:1fr}
}
</style>
</head>

<body>
<div class="app">

  <!-- TOP -->
  <div class="top">
    <b>AIX ‚Ä¢ Super Intelligence</b>
    <span class="badge" id="state">‚óè READY</span>
  </div>

  <!-- MAIN -->
  <div class="main">

    <!-- PREVIEW -->
    <div class="preview" id="preview">
      <div class="placeholder" id="placeholder">
        Output preview will appear here
      </div>
    </div>

    <!-- SIDE -->
    <div class="side">

      <div class="section">
        <h4>Smart Tools</h4>
        <div class="tools">
          <div class="tool" onclick="quick('video')">üé¨ Video</div>
          <div class="tool" onclick="quick('image')">üñº Image</div>
          <div class="tool" onclick="quick('song')">üéµ Song</div>
          <div class="tool" onclick="quick('files')">üìÅ Files</div>
          <div class="tool" onclick="openGit()">üêô GitHub</div>
          <div class="tool" onclick="copyLink()">üìã Copy</div>
        </div>
      </div>

      <div class="section">
        <h4>Generated Files</h4>
        <div class="files" id="files">No files yet</div>
      </div>

      <div class="section">
        <h4>Live Logs</h4>
      </div>
      <div class="logs" id="logs">Idle‚Ä¶</div>

    </div>
  </div>

  <!-- CHAT / CONSOLE -->
  <div class="bottom">
    <div class="chat">
      <textarea id="msg" rows="2" placeholder="‡§¨‡•â‡§∏, ‡§ï‡§æ‡§Ø ‡§ï‡§∞‡§æ‡§Ø‡§ö‡§Ç ‡§Ü‡§π‡•á? (Video / Image / Song / File / Anything)"></textarea>
      <button class="send" onclick="send()">SEND</button>
    </div>
    <div class="actionbar">
      <button onclick="download()">‚¨á Download</button>
      <button onclick="clearChat()">üßπ Clear</button>
    </div>
  </div>

</div>

<script>
const API="https://boss-aix-backend-nai6.onrender.com";
let lastOutput=null;

/* ===== CHAT SEND ===== */
async function send(){
  const t=document.getElementById("msg").value.trim();
  if(!t) return;
  document.getElementById("state").innerText="‚óè RUNNING";
  document.getElementById("msg").value="";
  await fetch(API+"/api/command",{
    method:"POST",
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({goal:t})
  });
}

/* ===== QUICK TOOLS ===== */
function quick(type){
  sendPreset(`Create ${type}`);
}

/* ===== PRESET ===== */
function sendPreset(text){
  document.getElementById("msg").value=text;
  send();
}

/* ===== DOWNLOAD ===== */
function download(){
  if(lastOutput) window.open(API+lastOutput,"_blank");
}

/* ===== COPY ===== */
function copyLink(){
  if(lastOutput) navigator.clipboard.writeText(API+lastOutput);
}

/* ===== GITHUB ===== */
function openGit(){
  window.open("https://github.com/balaji2001chavan/AIX-CLEAN","_blank");
}

/* ===== POLL ===== */
let polling=false;
async function poll(){
  if(polling) return;
  polling=true;
  try{
    const s=await fetch(API+"/api/status").then(r=>r.json());
    if(!s.running){
      document.getElementById("state").innerText="‚óè READY";
      setTimeout(poll,4000);
      return;
    }
    const l=await fetch(API+"/api/logs").then(r=>r.json());
    document.getElementById("logs").innerHTML=l.join("<br>");

    if(s.job?.output){
      lastOutput=s.job.output;
      document.getElementById("files").innerHTML=
        `<div onclick="download()">üìÑ ${s.job.output}</div>`;

      const p=document.getElementById("preview");
      p.innerHTML="";
      if(s.job.output.endsWith(".mp4")){
        const v=document.createElement("video");
        v.src=API+s.job.output;
        v.controls=true;
        p.appendChild(v);
      }else if(s.job.output.endsWith(".png")){
        const i=document.createElement("img");
        i.src=API+s.job.output;
        p.appendChild(i);
      }
      document.getElementById("state").innerText="‚óè DONE";
      setTimeout(poll,5000);
      return;
    }
    setTimeout(poll,2000);
  }catch{
    setTimeout(poll,8000);
  }finally{polling=false;}
}
poll();

/* ===== UTIL ===== */
function clearChat(){
  document.getElementById("logs").innerText="Cleared";
}
</script>
</body>
</html>
