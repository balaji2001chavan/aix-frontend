<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>AIX ‚Äì Master Agent AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
  body {
    margin: 0;
    font-family: Inter, system-ui, sans-serif;
    background: linear-gradient(135deg, #0f172a, #020617);
    color: #e5e7eb;
    height: 100vh;
    display: flex;
    flex-direction: column;
  }

  header {
    padding: 16px 20px;
    background: rgba(15,23,42,0.8);
    border-bottom: 1px solid #1e293b;
    font-size: 20px;
    font-weight: 600;
    letter-spacing: 0.5px;
  }

  header span {
    color: #38bdf8;
  }

  #status {
    font-size: 13px;
    color: #22c55e;
  }

  main {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
  }

  .msg {
    max-width: 800px;
    margin-bottom: 16px;
    line-height: 1.6;
    white-space: pre-wrap;
  }

  .user {
    color: #93c5fd;
  }

  .aix {
    color: #e5e7eb;
  }

  .bubble {
    padding: 14px 16px;
    border-radius: 12px;
    background: rgba(30,41,59,0.7);
    border: 1px solid #334155;
  }

  footer {
    padding: 14px;
    border-top: 1px solid #1e293b;
    background: rgba(2,6,23,0.9);
    display: flex;
    gap: 10px;
  }

  textarea {
    flex: 1;
    resize: none;
    padding: 12px;
    border-radius: 10px;
    border: 1px solid #334155;
    background: #020617;
    color: #e5e7eb;
    font-size: 14px;
    height: 60px;
  }

  button {
    width: 110px;
    border-radius: 10px;
    border: none;
    background: linear-gradient(135deg,#38bdf8,#0ea5e9);
    color: #020617;
    font-weight: 600;
    cursor: pointer;
  }

  button:disabled {
    opacity: 0.5;
  }

  .error {
    color: #f87171;
  }
</style>
</head>

<body>

<header>
  AIX <span>Master Agent AI</span><br>
  <span id="status">‚óè Backend checking...</span>
</header>

<main id="chat">
  <div class="msg aix">
    <div class="bubble">
      Hello. I am AIX.<br>
      I advise, engineer, and execute.<br><br>
      Tell me what you want to build, fix, or grow.
    </div>
  </div>
</main>

<footer>
  <textarea id="input" placeholder="Talk to AIX‚Ä¶"></textarea>
  <button id="send">Send</button>
</footer>

<script>
const API_BASE = "https://allinonestopdeals.com"; 
// üëâ ‡§ú‡§∞ IP ‡§µ‡§æ‡§™‡§∞‡§æ‡§Ø‡§ö‡§æ ‡§Ö‡§∏‡•á‡§≤ ‡§§‡§∞:
// const API_BASE = "http://13.61.225.145:8080";

const chat = document.getElementById("chat");
const input = document.getElementById("input");
const sendBtn = document.getElementById("send");
const statusEl = document.getElementById("status");

function addMessage(text, type) {
  const wrap = document.createElement("div");
  wrap.className = "msg " + type;

  const bubble = document.createElement("div");
  bubble.className = "bubble";
  bubble.textContent = text;

  wrap.appendChild(bubble);
  chat.appendChild(wrap);
  chat.scrollTop = chat.scrollHeight;
}

async function checkBackend() {
  try {
    const res = await fetch(API_BASE + "/api/health");
    if (!res.ok) throw new Error();
    statusEl.textContent = "‚óè AIX Online";
    statusEl.style.color = "#22c55e";
  } catch {
    statusEl.textContent = "‚óè Backend unreachable";
    statusEl.style.color = "#f87171";
  }
}

async function sendMessage() {
  const msg = input.value.trim();
  if (!msg) return;

  addMessage("You: " + msg, "user");
  input.value = "";
  sendBtn.disabled = true;

  try {
    const res = await fetch(API_BASE + "/api/aix/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: msg })
    });

    if (!res.ok) throw new Error("Server error");

    const data = await res.json();
    addMessage("AIX:\n" + data.reply, "aix");

  } catch (err) {
    addMessage(
      "Connection error.\nAIX backend is not reachable.\nCheck AWS / NGINX / API.",
      "aix error"
    );
  }

  sendBtn.disabled = false;
}

sendBtn.onclick = sendMessage;
input.addEventListener("keydown", e => {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});

checkBackend();
setInterval(checkBackend, 10000);
</script>

</body>
</html>
